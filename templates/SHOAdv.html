{% extends 'navBarAdvSTSe.html' %}
 {% block body %}<main id="main" class="main">

    



    <div class="section-container">
      <div class="container">
        <div class="pagetitle">
      <h1 style="text-align: center;">المقررات الدراسية المقترحة</h1>

    </div><!-- End Page Title -->
        <div class="row">
          <div  class="col-12">

            <div class="card text-center">
              <div class="card-body">
                  <h4 class="card-title"></h4>
                  {% if haveGraduationProject == true %}
                <p style="color: rgba(220,53,69,.9)">لم يتم ادراج مشروع التخرج في الجدول نظرا لانه يتم الاتفاق مع مشرفة المشروع على مواعيد الاجتماعات</p>
                {% endif %}
               
 
                 
                  <div class="container overflow-hidden">
                    <div class="row gy-5">
                      <div class="col-6">
                        <div class="p-3 ">
                          <label style="font-size: 18px; color: #012970;" class="control-label"> بحث عن اسم دكتور، شعبة،وقت

                        </div>
                      </div>
                      <div class="col-6">
                        <div class="p-3 ">
                         
                            <label style=" font-size: 18px; color: #012970;" class="control-label">الجدوال حسب </label>
   



                        </div>
                      </div>
                      <div style="--bs-gutter-y: -1rem;" class="col-6">
                        <div class="p-3">
                          
                          <input  id="myInput" onkeyup="search()" onload="document.cookie = ''" id='searchBox' style="text-align: right;"
                          class="form-control me-1 form-input  form-control-sm" type="search" placeholder="بحث"
                          aria-label="Search" readonly onfocus="this.removeAttribute('readonly')"  autocomplete="off">
                        </div>
    
                      </div>
                      <div style="--bs-gutter-y: -1rem;" class="col-6">
                        <div class="p-3">
                          <select style="text-align: center;"
                              class="form-select form-select-md">
                              <option>
                                الجدوال بالشعب المتاحة
                              </option>

                              <option>
                                الجدوال مع طلب توسعه
                              </option>
                              <option>
                                الجدوال بالشعب المتاحة بايام اوف
                              </option>
                              <option>
                                الجدوال مع طلب توسعه بايام اوف
                              </option>
                            </select>
                        </div>
                      </div>
                    </div>
                  </div>
<br>
<div class="container px-4">
  <div class="row ">
    <div class="col">
   
      
        <button onclick= "next()" type="button" class="btn btn-outline-primary me-md-2">التالي</button>
        <button onclick="prev()"  type="button" class="btn btn-outline-primary me-md-2">السابق</button>     
  
    </div>
    <div class="col">
     

          
       
   
    </div>
  </div>
</div>
<br>
                  <form   method="post">
                      <div style = 'direction: rtl;' class="table-responsive">
                        <table style = 'direction: rtl;' id = 'myTable' class=" table table-striped table-primary table-hover ">
                          <thead>
                            <tr>
                              <th scope="col">م</th>
<th scope="col">رمز المادة</th>
<th scope="col">الرقم</th>
                              <th scope="col">اسم المادة</th>
                              <th scope="col">الشعبة</th>
                              <th scope="col">استاذ المادة</th>
                              <th scope="col">الاحد</th>
                              <th scope="col">الاثنين</th>
                              <th scope="col">الثلاثاء</th>
                              <th scope="col">الاربعاء</th>
                              <th scope="col">الخميس</th>
                              <th scope="col">المتاح</th>
<th scope="col">المسجل</th>

                            </tr>
                          </thead>
                          <tbody>
  
                          </tbody>
                        </table>
                      </div>
                      <br>

                      <button type="button" id='add' class="btn btn-primary" data-bs-toggle="modal"
                        data-bs-target="#exampleModal">
                        اضافة الجدول
                      </button>

                </div>


                <!-- Modal -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                  aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel" style="padding-left: 45%;
                        color: rgba(220,53,69,.9);
                        font-size: 42px;"> تنبيه </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        سيتم حذف الجدول الدراسي الموجود في موقع الجامعة واضافة الجدول المختار ولكن قد يتم امتلاء احد
                        الشعب
                        لاحدى المقررات او جميعها قبل التمكن من اضافته

                        <br>
                        <br>

                        <label class="form-check-label" for="flexCheckDefault" id='check'>
                          اتعهد انا صاحب الطلب بتحمل المسؤولية
                        </label>
                        <input onchange="disabledButton()" class="form-check-input" type="checkbox" value=""
                          id="defaultCheck1">

                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">
                          الغاء</button>

                        <button type="submit" formaction="{{ url_for('addr')}}" class="btn btn-primary" id='ok' disabled> اضافة الجدول </button>

                      </div>
                    </div>
                  </div>
                </div>
              
                </div>
                <!-- End Default Table Example -->
                 </form>
              </div>
            </div>
          </div>


         <script type="text/javascript" src="{{ url_for('static',filename='Schedule.js') }}"></script>

 <script>

  t = {{avlTables | safe}} ;
  TB = t
   var b = 0
table =  document.getElementsByTagName('table')[0]
  if (t.length == 0 ){
 for (i = table.rows.length-1 ; i >= 1  ; i-- ){
     table.deleteRow(i);
  }

  }
  else {
     

    for (i = table.rows.length-1 ; i >= 1  ; i-- ){
     table.deleteRow(i);
  }

  for (i = 0 ; i < t[b][0].length ; i++){
    var row = table.insertRow(i+1);
for (j = 0 ; j < 13 ; j++){
    if ( j >0 && j < 5 ){
        f = i+""+j
         row.insertCell(j).innerHTML =t[b][0][i][j]+'<input type="hidden" value = "'+t[b][0][i][j]+'" name = "'+f+'" >' ;

    }
    else
  row.insertCell(j).innerHTML =t[b][0][i][j] ;
}
  


  }

      
  }
  function next() {
 b++ 
        if (b == t.length){

b = 0 
}

  
table =  document.getElementsByTagName('table')[0]
  if (t.length == 0 ){
 for (i = table.rows.length-1 ; i >= 1  ; i-- ){
     table.deleteRow(i);
  }

  }
  else {
     

    for (i = table.rows.length-1 ; i >= 1  ; i-- ){
     table.deleteRow(i);
  }

  for (i = 0 ; i < t[b][0].length ; i++){
    var row = table.insertRow(i+1);
for (j = 0 ; j < 13 ; j++){
    if ( j >0 && j < 5 ){
        f = i+""+j
         row.insertCell(j).innerHTML =t[b][0][i][j]+'<input type="hidden" value = "'+t[b][0][i][j]+'" name = "'+f+'" >' ;

    }
    else
  row.insertCell(j).innerHTML =t[b][0][i][j] ;
}

  


  }

      
  }        
     
     

  }
  function prev() {
  b--
        if (b == -1) {
            b = t.length - 1
        }
table =  document.getElementsByTagName('table')[0]
  if (t.length == 0 ){
 for (i = table.rows.length-1 ; i >= 1  ; i-- ){
     table.deleteRow(i);
  }

  }
  else {
     

    for (i = table.rows.length-1 ; i >= 1  ; i-- ){
     table.deleteRow(i);
  }

  for (i = 0 ; i < t[b][0].length ; i++){
    var row = table.insertRow(i+1);
for (j = 0 ; j < 13 ; j++){
    if ( j >0 && j < 5 ){
        f = i+""+j
         row.insertCell(j).innerHTML =t[b][0][i][j]+'<input type="hidden" value = "'+t[b][0][i][j]+'" name = "'+f+'" >' ;

    }
    else
  row.insertCell(j).innerHTML =t[b][0][i][j] ;
}
  


  }

      
  }
    
  }
  document.getElementsByTagName('select')[0].addEventListener('change', function (evant){
      var fTable = evant.target.value
      if (fTable == 'الجدوال بالشعب المتاحة'){
          t = {{avlTables | safe}}
          b = -1
TB = t

      }
      else if (fTable == 'الجدوال مع طلب توسعه'){
          t = {{fullTables | safe}}
          b = -1
TB = t

      }
            else if (fTable == 'الجدوال بالشعب المتاحة بايام اوف' ){
          t = {{avlOffTables | safe}}
           b = -1
TB = t
      }
                  else {
                      t = {{fullOffTables | safe}}
                     b = -1
          TB = t


      }
                    if (t.length == 0 ){
 for (i = table.rows.length-1 ; i >= 1  ; i-- ){
     table.deleteRow(i);
  }}
  else {
  var b = 0
table =  document.getElementsByTagName('table')[0]
  if (t.length == 0 ){
 for (i = table.rows.length-1 ; i >= 1  ; i-- ){
     table.deleteRow(i);
  }

  }
  else {
     

    for (i = table.rows.length-1 ; i >= 1  ; i-- ){
     table.deleteRow(i);
  }

  for (i = 0 ; i < t[b][0].length ; i++){
    var row = table.insertRow(i+1);
for (j = 0 ; j < 13 ; j++){
    if ( j >0 && j < 5 ){
        f = i+""+j
         row.insertCell(j).innerHTML =t[b][0][i][j]+'<input type="hidden" value = "'+t[b][0][i][j]+'" name = "'+f+'" >' ;

    }
    else
  row.insertCell(j).innerHTML =t[b][0][i][j] ;
}
  


  }

      
  }
b++
  }

  })



     function search() {
  var input, filter, table, tr, td, i ;

  input = document.getElementById("myInput");
  filter = document.getElementById("myInput").value;
  tables = document.getElementsByTagName('table')[0]
      for (i = tables.rows.length-1 ; i >= 1  ; i-- ){
     tables.deleteRow(i);
  }
  if (filter == ''){
      t = TB

  }
  else {

            table = TB
      t = []
      for (k = 0; k < table.length; k++) {


          for (var i = 0; i < table[k][0].length; i++) {


              for (var j = 0; j < 13; j++) {
                  var td = table[k][0][i][j];

                  if (td == filter) {
t.push(table[k])
                      break
                  }
              }
          }

      }

  }
  b = 0


 for (i = 0 ; i < t[b][0].length ; i++) {
     var row = tables.insertRow(i + 1);
     for (j = 0; j < 13; j++) {
    if ( j >0 && j < 5 ){
        f = i+""+j
         row.insertCell(j).innerHTML =t[b][0][i][j]+'<input type="hidden" value = "'+t[b][0][i][j]+'" name = "'+f+'" >' ;

    }
    else
  row.insertCell(j).innerHTML =t[b][0][i][j] ;
}
 }

b++
}





  </script>



  </main><!-- End #main -->
  {% endblock %}